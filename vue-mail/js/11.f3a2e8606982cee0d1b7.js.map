{"version":3,"sources":["webpack:///js/11.f3a2e8606982cee0d1b7.js","webpack:///./src/views/draftbox/index.vue","webpack:///index.vue?c3e4","webpack:///./src/api/draftbox.js","webpack:///./src/views/draftbox/index.vue?7f2e","webpack:///./src/views/draftbox/index.vue?e707","webpack:///./src/views/draftbox/index.vue?a1e4"],"names":["webpackJsonp","303","module","exports","__webpack_require__","injectStyle","ssrContext","Component","393","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","defineProperty","value","_draftbox","draftboxAPI","_mail_label","labelAPI","_validate","_utils","name","data","list","total","listLoading","listQuery","page","limit","title","startCreatDate","stopCreateDate","startModifyDate","stopModifyDate","sort","order","multipleSelection","tableKey","labelList","createDateRange","lastModifyDateRange","dateOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","created","this","initPage","filters","showReceiveName","receiveList","nameStr","forEach","item","methods","getList","getLabelList","_this","startCreateDate","fetchList","then","response","items","_this2","res","handleFilter","handleSizeChange","val","handleCurrentChange","customSort","sortObj","prop","timeFilter","time","undefined","parseInt","goToDetail","id","$store","commit","$router","push","path","handleSelectionChange","handleDelete","_this3","selectedLen","length","$message","$confirm","confirmButtonText","cancelButtonText","type","idArr","delSendMail","subscribe","next","message","duration","error","showClose","catch","handleDownload","_this4","e","_require","export_json_to_excel","tHeader","filterVal","formatJson","parseTime","now","bind","oe","jsonData","map","v","j","indexOf","getType","str","mail","toggleStar","row","_this5","isStar","handleMark","labelId","_this6","markLabel","408","query","_fetch2","url","method","params","delDraft","idStr","String","console","log","_Observable","Observable","create","observer","setTimeout","_fetch","436","i","version","sources","names","mappings","file","sourceRoot","518","content","locals","567","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","attrs","icon","on","click","$event","_v","icon-class","split-button","menu-align","command","slot","_l","label","_s","staticStyle","width","placeholder","nativeOn","keyup","_k","keyCode","model","callback","$$v","expression","picker-options","align","modifiers","body","ref","border","highlight-current-row","sort-change","selection-change","min-width","scopedSlots","_u","fn","scope","_e","show-overflow-tooltip","_f","sortable","guid","createDate","lastModifyDate","current-page","page-sizes","page-size","layout","size-change","current-change","update:currentPage","staticRenderFns"],"mappings":"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","file":"js/11.f3a2e8606982cee0d1b7.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 303:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(518)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(393),\n  /* template */\n  __webpack_require__(567),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 393:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _draftbox = __webpack_require__(408);\n\nvar draftboxAPI = _interopRequireWildcard(_draftbox);\n\nvar _mail_label = __webpack_require__(114);\n\nvar labelAPI = _interopRequireWildcard(_mail_label);\n\nvar _validate = __webpack_require__(115);\n\nvar _utils = __webpack_require__(9);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n    name: 'draftbox',\n    data: function data() {\n        return {\n            list: null,\n            total: null,\n            listLoading: true,\n            listQuery: {\n                page: 1,\n                limit: 20,\n                title: '',\n                startCreatDate: null,\n                stopCreateDate: null,\n                startModifyDate: null,\n                stopModifyDate: null,\n                sort: '',\n                order: ''\n            },\n            multipleSelection: [],\n            tableKey: 0,\n            labelList: [],\n            createDateRange: [],\n            lastModifyDateRange: [],\n            dateOptions: {\n                shortcuts: [{\n                    text: '最近一周',\n                    onClick: function onClick(picker) {\n                        var end = new Date();\n                        var start = new Date();\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n                        picker.$emit('pick', [start, end]);\n                    }\n                }, {\n                    text: '最近一个月',\n                    onClick: function onClick(picker) {\n                        var end = new Date();\n                        var start = new Date();\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n                        picker.$emit('pick', [start, end]);\n                    }\n                }, {\n                    text: '最近三个月',\n                    onClick: function onClick(picker) {\n                        var end = new Date();\n                        var start = new Date();\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n                        picker.$emit('pick', [start, end]);\n                    }\n                }]\n            }\n        };\n    },\n    created: function created() {\n        this.initPage();\n    },\n\n    filters: {\n        showReceiveName: function showReceiveName(receiveList) {\n            var nameStr = '';\n            receiveList.forEach(function (item) {\n                return nameStr += item.name + ';';\n            });\n            return nameStr;\n        }\n    },\n    methods: {\n        initPage: function initPage() {\n            this.getList();\n            this.getLabelList();\n        },\n        getList: function getList() {\n            var _this = this;\n\n            this.listLoading = true;\n            this.listQuery.startCreateDate = this.createDateRange[0] ? this.createDateRange[0].getTime() : null;\n            this.listQuery.stopCreateDate = this.createDateRange[1] ? this.createDateRange[1].getTime() : null;\n            this.listQuery.startModifyDate = this.lastModifyDateRange[0] ? this.lastModifyDateRange[0].getTime() : null;\n            this.listQuery.stopModifyDate = this.lastModifyDateRange[1] ? this.lastModifyDateRange[1].getTime() : null;\n            draftboxAPI.fetchList(this.listQuery).then(function (response) {\n                _this.list = response.data.items;\n                _this.total = response.data.total;\n                _this.listLoading = false;\n            });\n        },\n        getLabelList: function getLabelList() {\n            var _this2 = this;\n\n            labelAPI.fetchList().then(function (res) {\n                _this2.labelList = res.data.labelList;\n            });\n        },\n        handleFilter: function handleFilter() {\n            this.getList();\n        },\n        handleSizeChange: function handleSizeChange(val) {\n            this.listQuery.limit = val;\n            this.getList();\n        },\n        handleCurrentChange: function handleCurrentChange(val) {\n            this.listQuery.page = val;\n            this.getList();\n        },\n        customSort: function customSort(sortObj) {\n            this.listQuery.sort = sortObj.prop;\n            this.listQuery.order = sortObj.order;\n            this.getList();\n        },\n        timeFilter: function timeFilter(time) {\n            if (!time[0]) {\n                this.listQuery.start = undefined;\n                this.listQuery.end = undefined;\n                return;\n            }\n            this.listQuery.start = parseInt(+time[0] / 1000);\n            this.listQuery.end = parseInt((+time[1] + 3600 * 1000 * 24) / 1000);\n        },\n        goToDetail: function goToDetail(id) {\n            this.$store.commit('SET_DRAFT_ID', id);\n            this.$store.commit('SET_MAIL_ID', null);\n            this.$store.commit('SET_PAGE_TYPE', 'edit');\n            this.$store.commit('SET_MAIL_TYPE', 'draft');\n            this.$router.push({ path: '/mail_send/index' });\n        },\n        handleSelectionChange: function handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        handleDelete: function handleDelete() {\n            var _this3 = this;\n\n            var selectedLen = this.multipleSelection.length || 0;\n            if (selectedLen < 1) {\n                this.$message('请选择草稿进行删除');\n                return;\n            }\n            this.$confirm('是否删除这' + selectedLen + '封草稿?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                var idArr = [];\n                _this3.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n                draftboxAPI.delSendMail(idArr).subscribe({\n                    next: function next() {\n                        _this3.$message({\n                            message: '删除成功',\n                            type: 'success',\n                            duration: 2000\n                        });\n                        _this3.getList();\n                    },\n                    error: function error() {\n                        return _this3.$message({\n                            showClose: true,\n                            message: '删除失败',\n                            type: 'error'\n                        });\n                    }\n                });\n            }).catch(function () {\n                _this3.$message('操作已取消');\n            });\n        },\n        handleDownload: function handleDownload() {\n            var _this4 = this;\n\n            __webpack_require__.e/* require.ensure */(19/* duplicate */).then((function () {\n                var _require = __webpack_require__(334),\n                    export_json_to_excel = _require.export_json_to_excel;\n\n                var tHeader = ['收件人', '主题', '创建时间', '最后修改时间'];\n                var filterVal = ['receiveList', 'title', 'createDate', 'lastmodifyDate'];\n                var data = _this4.formatJson(filterVal, _this4.list);\n                export_json_to_excel(tHeader, data, (0, _utils.parseTime)(Date.now()) + '草稿箱数据');\n            }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);\n        },\n        formatJson: function formatJson(filterVal, jsonData) {\n            return jsonData.map(function (v) {\n                return filterVal.map(function (j) {\n                    if (~j.indexOf('Date')) {\n                        return (0, _utils.parseTime)(v[j]);\n                    } else if ((0, _validate.getType)(v[j]) === 'Array') {\n                        var str = '';\n                        v[j].forEach(function (item) {\n                            return str += item.name + '<' + item.mail + '>;';\n                        });\n                        return str;\n                    } else {\n                        return v[j];\n                    }\n                });\n            });\n        },\n        toggleStar: function toggleStar(row) {\n            var _this5 = this;\n\n            var idArr = [];\n            if (row) {\n                idArr.push(row.id);\n            } else {\n                var selectedLen = this.multipleSelection.length || 0;\n                if (selectedLen < 1) {\n                    this.$message('请选择邮件进行标记');\n                    return;\n                }\n                this.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n            }\n            labelAPI.toggleStar(idArr).subscribe({\n                next: function next() {\n                    if (row) {\n                        row.isStar = !row.isStar;\n                    } else {\n                        _this5.multipleSelection.forEach(function (item) {\n                            return item.isStar = true;\n                        });\n                    }\n                }\n            });\n        },\n        handleMark: function handleMark(labelId) {\n            var _this6 = this;\n\n            if (labelId === 'star') {\n                this.toggleStar();\n            } else {\n                var selectedLen = this.multipleSelection.length || 0;\n                if (selectedLen < 1) {\n                    this.$message('请选择邮件进行标记');\n                    return;\n                }\n                var idArr = [];\n                this.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n                labelAPI.markLabel(labelId, idArr).subscribe({\n                    next: function next() {\n                        return _this6.getList();\n                    }\n                });\n            }\n        }\n    }\n};\n\n/***/ }),\n\n/***/ 408:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.fetchList = fetchList;\nexports.delDraft = delDraft;\n\nvar _fetch = __webpack_require__(35);\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _Observable = __webpack_require__(64);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction fetchList(query) {\n    return (0, _fetch2.default)({\n        url: '/draftbox/list',\n        method: 'get',\n        params: query\n    });\n}\n\nfunction delDraft(idArr) {\n    var idStr = String(idArr);\n    console.log('要删除的草稿id:' + idStr);\n    return _Observable.Observable.create(function (observer) {\n        setTimeout(function () {\n            observer.next(true);\n        }, 1000);\n    });\n}\n\n/***/ }),\n\n/***/ 436:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(300)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 518:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(436);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(301)(\"10f73f0b\", content, true);\n\n/***/ }),\n\n/***/ 567:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container calendar-list-container\"\n  }, [_c('div', {\n    staticClass: \"filter-container\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-del\",\n    attrs: {\n      \"type\": \"danger\",\n      \"icon\": \"delete\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleDelete()\n      }\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-reload\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.initPage\n    }\n  }, [_c('icon-svg', {\n    attrs: {\n      \"icon-class\": \"reload4\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-dropdown', {\n    staticClass: \"tool-item filter-item\",\n    attrs: {\n      \"split-button\": \"\",\n      \"type\": \"primary\",\n      \"menu-align\": \"start\"\n    },\n    on: {\n      \"command\": _vm.handleMark\n    }\n  }, [_vm._v(\"\\n            标记为\\n            \"), _c('el-dropdown-menu', {\n    slot: \"dropdown\"\n  }, [_c('el-dropdown-item', {\n    attrs: {\n      \"command\": \"star\"\n    }\n  }, [_c('icon-svg', {\n    staticClass: \"download-icon\",\n    attrs: {\n      \"icon-class\": \"favourite\"\n    }\n  }), _vm._v(\"星标邮件\")], 1), _vm._v(\" \"), _vm._l((_vm.labelList), function(label) {\n    return _c('el-dropdown-item', {\n      key: label.id,\n      attrs: {\n        \"command\": label.id + ''\n      }\n    }, [_c('icon-svg', {\n      staticClass: \"download-icon\",\n      attrs: {\n        \"icon-class\": \"label1\"\n      }\n    }), _vm._v(_vm._s(label.name))], 1)\n  })], 2)], 1), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"标题\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.title),\n      callback: function($$v) {\n        _vm.listQuery.title = $$v\n      },\n      expression: \"listQuery.title\"\n    }\n  }), _vm._v(\" \"), _c('el-date-picker', {\n    staticClass: \"tool-item filter-item\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    attrs: {\n      \"type\": \"datetimerange\",\n      \"picker-options\": _vm.dateOptions,\n      \"placeholder\": \"创建时间\",\n      \"align\": \"right\"\n    },\n    model: {\n      value: (_vm.createDateRange),\n      callback: function($$v) {\n        _vm.createDateRange = $$v\n      },\n      expression: \"createDateRange\"\n    }\n  }), _vm._v(\" \"), _c('el-date-picker', {\n    staticClass: \"tool-item filter-item\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    attrs: {\n      \"type\": \"datetimerange\",\n      \"picker-options\": _vm.dateOptions,\n      \"placeholder\": \"最后修改时间\",\n      \"align\": \"right\"\n    },\n    model: {\n      value: (_vm.lastModifyDateRange),\n      callback: function($$v) {\n        _vm.lastModifyDateRange = $$v\n      },\n      expression: \"lastModifyDateRange\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"search\"\n    },\n    on: {\n      \"click\": _vm.handleFilter\n    }\n  }, [_vm._v(\"搜索\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"text\",\n      \"icon\": \"document\"\n    },\n    on: {\n      \"click\": _vm.handleDownload\n    }\n  }, [_vm._v(\"导出\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.body\",\n      value: (_vm.listLoading),\n      expression: \"listLoading\",\n      modifiers: {\n        \"body\": true\n      }\n    }],\n    key: _vm.tableKey,\n    ref: \"multipleTable\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\",\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"sort-change\": _vm.customSort,\n      \"selection-change\": _vm.handleSelectionChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"min-width\": \"30px\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"left\",\n      \"width\": \"90px\",\n      \"label\": \"信息\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('icon-svg', {\n          staticClass: \"star\",\n          attrs: {\n            \"icon-class\": scope.row.isStar ? 'favourite' : 'favourite-o'\n          },\n          nativeOn: {\n            \"click\": function($event) {\n              _vm.toggleStar(scope.row)\n            }\n          }\n        }), _vm._v(\" \"), (scope.row.isHaveFile) ? _c('icon-svg', {\n          staticClass: \"file\",\n          attrs: {\n            \"icon-class\": \"label4\"\n          }\n        }) : _vm._e(), _vm._v(\" \"), (scope.row.isHaveAudio) ? _c('icon-svg', {\n          attrs: {\n            \"icon-class\": \"voice4\"\n          }\n        }) : _vm._e()]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"center\",\n      \"label\": \"收件人\",\n      \"width\": \"120px\",\n      \"show-overflow-tooltip\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"showReceiveName\")(scope.row.receiveList)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"title\",\n      \"sortable\": \"custom\",\n      \"label\": \"主题\",\n      \"show-overflow-tooltip\": true,\n      \"min-width\": \"400px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', {\n          staticClass: \"link-type\",\n          on: {\n            \"click\": function($event) {\n              _vm.goToDetail(scope.row.id)\n            }\n          }\n        }, [_vm._v(_vm._s(scope.row.title))]), _vm._v(\" \"), _vm._l((scope.row.labelList), function(label) {\n          return _c('el-tag', {\n            key: label.guid\n          }, [_vm._v(_vm._s(label.name))])\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"createDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"创建时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.createDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"lastModifyDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"最后修改时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.lastModifyDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.listLoading),\n      expression: \"!listLoading\"\n    }],\n    staticClass: \"pagination-container\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"current-page\": _vm.listQuery.page,\n      \"page-sizes\": [10, 20, 30, 50],\n      \"page-size\": _vm.listQuery.limit,\n      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n      \"total\": _vm.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange,\n      \"update:currentPage\": function($event) {\n        _vm.listQuery.page = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/11.f3a2e8606982cee0d1b7.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b7dd7da0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b7dd7da0\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/draftbox/index.vue\n// module id = 303\n// module chunks = 11","<template>\r\n    <div class=\"app-container calendar-list-container\">\r\n    \r\n        <div class=\"filter-container\">\r\n    \r\n            <el-button v-waves type=\"danger\" icon=\"delete\" class=\"tool-item filter-item btn-del\" v-on:click=\"handleDelete()\"></el-button>\r\n            <el-button v-waves type=\"primary\" class=\"tool-item filter-item btn-reload\" v-on:click=\"initPage\">\r\n                <icon-svg icon-class=\"reload4\" />\r\n            </el-button>\r\n    \r\n            <el-dropdown @command=\"handleMark\" split-button type=\"primary\" menu-align=\"start\" class=\"tool-item filter-item\">\r\n                标记为\r\n                <el-dropdown-menu slot=\"dropdown\">\r\n                    <el-dropdown-item command=\"star\">\r\n                        <icon-svg icon-class=\"favourite\" class=\"download-icon\" />星标邮件</el-dropdown-item>\r\n                    <el-dropdown-item v-for=\"label in labelList\" :key=\"label.id\" :command=\"label.id + ''\">\r\n                        <icon-svg icon-class=\"label1\" class=\"download-icon\" />{{label.name}}</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 300px;\" class=\"filter-item\" placeholder=\"标题\" v-model=\"listQuery.title\">\r\n            </el-input>\r\n            <el-date-picker v-model=\"createDateRange\" style=\"width: 200px;\" type=\"datetimerange\" :picker-options=\"dateOptions\" placeholder=\"创建时间\" align=\"right\" class=\"tool-item filter-item\">\r\n            </el-date-picker>\r\n            <el-date-picker v-model=\"lastModifyDateRange\" style=\"width: 200px;\" type=\"datetimerange\" :picker-options=\"dateOptions\" placeholder=\"最后修改时间\" align=\"right\" class=\"tool-item filter-item\">\r\n            </el-date-picker>\r\n    \r\n            <el-button class=\"filter-item\" type=\"primary\" v-waves icon=\"search\" @click=\"handleFilter\">搜索</el-button>\r\n            <el-button class=\"filter-item\" type=\"text\" icon=\"document\" @click=\"handleDownload\">导出</el-button>\r\n        </div>\r\n    \r\n        <el-table :key='tableKey' :data=\"list\" ref=\"multipleTable\" @sort-change=\"customSort\" @selection-change=\"handleSelectionChange\" v-loading.body=\"listLoading\" border highlight-current-row style=\"width: 100%\">\r\n    \r\n            <el-table-column type=\"selection\" min-width=\"30px\">\r\n            </el-table-column>\r\n    \r\n            <el-table-column align=\"left\" width=\"90px\" label=\"信息\">\r\n                <template scope=\"scope\">\r\n                    <icon-svg @click.native=\"toggleStar(scope.row)\" :icon-class=\"scope.row.isStar? 'favourite':'favourite-o'\" class=\"star\" />\r\n                    <icon-svg v-if=\"scope.row.isHaveFile\" icon-class=\"label4\" class=\"file\" />\r\n                    <icon-svg v-if=\"scope.row.isHaveAudio\" icon-class=\"voice4\"/>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column align=\"center\" label=\"收件人\" width=\"120px\" :show-overflow-tooltip=\"true\">\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.receiveList | showReceiveName}}</span>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column prop=\"title\" sortable=\"custom\" label=\"主题\" :show-overflow-tooltip=\"true\" min-width=\"400px\">\r\n                <template scope=\"scope\">\r\n                    <span class=\"link-type\" @click=\"goToDetail(scope.row.id)\">{{scope.row.title}}</span>\r\n                    <el-tag v-for=\"label in scope.row.labelList\" :key=\"label.guid\">{{label.name}}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column prop=\"createDate\" sortable=\"custom\" align=\"center\" label=\"创建时间\" width=\"150px\">\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.createDate | parseTime('{y}-{m}-{d} {h}:{i}')}}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"lastModifyDate\" sortable=\"custom\" align=\"center\" label=\"最后修改时间\" width=\"150px\">\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.lastModifyDate | parseTime('{y}-{m}-{d} {h}:{i}')}}</span>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n        </el-table>\r\n    \r\n        <div v-show=\"!listLoading\" class=\"pagination-container\">\r\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"listQuery.page\" :page-sizes=\"[10,20,30, 50]\" :page-size=\"listQuery.limit\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n    \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as draftboxAPI from 'api/draftbox';\r\nimport * as labelAPI from 'api/mail_label';\r\nimport { getType } from 'utils/validate';\r\nimport { parseTime } from 'utils';\r\n\r\nexport default {\r\n    name: 'draftbox',\r\n    data() {\r\n        return {\r\n            list: null,\r\n            total: null,\r\n            listLoading: true,\r\n            listQuery: {\r\n                page: 1,\r\n                limit: 20,\r\n                title: '',\r\n                startCreatDate: null,\r\n                stopCreateDate: null,\r\n                startModifyDate: null,\r\n                stopModifyDate: null,\r\n                sort: '',\r\n                order: ''\r\n            },\r\n            multipleSelection: [],\r\n            tableKey: 0,\r\n            labelList: [],\r\n            createDateRange: [],\r\n            lastModifyDateRange: [],\r\n            dateOptions: {\r\n                shortcuts: [{\r\n                    text: '最近一周',\r\n                    onClick(picker) {\r\n                        const end = new Date();\r\n                        const start = new Date();\r\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n                        picker.$emit('pick', [start, end]);\r\n                    }\r\n                }, {\r\n                    text: '最近一个月',\r\n                    onClick(picker) {\r\n                        const end = new Date();\r\n                        const start = new Date();\r\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n                        picker.$emit('pick', [start, end]);\r\n                    }\r\n                }, {\r\n                    text: '最近三个月',\r\n                    onClick(picker) {\r\n                        const end = new Date();\r\n                        const start = new Date();\r\n                        start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n                        picker.$emit('pick', [start, end]);\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.initPage();\r\n    },\r\n    filters: {\r\n        showReceiveName(receiveList) {\r\n            let nameStr = '';\r\n            receiveList.forEach(item => nameStr += item.name + ';');\r\n            return nameStr;\r\n        }\r\n    },\r\n    methods: {\r\n        initPage() {\r\n            this.getList();\r\n            this.getLabelList();\r\n        },\r\n        getList() {\r\n            this.listLoading = true;\r\n            this.listQuery.startCreateDate = this.createDateRange[0] ? this.createDateRange[0].getTime() : null;\r\n            this.listQuery.stopCreateDate = this.createDateRange[1] ? this.createDateRange[1].getTime() : null;\r\n            this.listQuery.startModifyDate = this.lastModifyDateRange[0] ? this.lastModifyDateRange[0].getTime() : null;\r\n            this.listQuery.stopModifyDate = this.lastModifyDateRange[1] ? this.lastModifyDateRange[1].getTime() : null;\r\n            draftboxAPI.fetchList(this.listQuery).then(response => {\r\n                this.list = response.data.items;\r\n                this.total = response.data.total;\r\n                this.listLoading = false;\r\n            })\r\n        },\r\n        getLabelList() {\r\n            labelAPI.fetchList().then(res => {\r\n                this.labelList = res.data.labelList;\r\n            })\r\n        },\r\n        handleFilter() {\r\n            this.getList();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.listQuery.limit = val;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.listQuery.page = val;\r\n            this.getList();\r\n        },\r\n        customSort(sortObj) {\r\n            this.listQuery.sort = sortObj.prop;\r\n            this.listQuery.order = sortObj.order;\r\n            this.getList();\r\n        },\r\n        timeFilter(time) {\r\n            if (!time[0]) {\r\n                this.listQuery.start = undefined;\r\n                this.listQuery.end = undefined;\r\n                return;\r\n            }\r\n            this.listQuery.start = parseInt(+time[0] / 1000);\r\n            this.listQuery.end = parseInt((+time[1] + 3600 * 1000 * 24) / 1000);\r\n        },\r\n        goToDetail(id) {\r\n            this.$store.commit('SET_DRAFT_ID', id);\r\n            this.$store.commit('SET_MAIL_ID', null);\r\n            this.$store.commit('SET_PAGE_TYPE', 'edit');\r\n            this.$store.commit('SET_MAIL_TYPE', 'draft');\r\n            this.$router.push({ path: '/mail_send/index' });\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        },\r\n        handleDelete() {\r\n            const selectedLen = this.multipleSelection.length || 0;\r\n            if (selectedLen < 1) {\r\n                this.$message('请选择草稿进行删除');\r\n                return;\r\n            }\r\n            this.$confirm('是否删除这' + selectedLen + '封草稿?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                const idArr = [];\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n                draftboxAPI.delSendMail(idArr).subscribe({\r\n                    next: () => {\r\n                        this.$message({\r\n                            message: '删除成功',\r\n                            type: 'success',\r\n                            duration: 2000\r\n                        });\r\n                        this.getList();\r\n                    },\r\n                    error: () => this.$message({\r\n                        showClose: true,\r\n                        message: '删除失败',\r\n                        type: 'error'\r\n                    })\r\n                });\r\n            }).catch(() => {\r\n                this.$message('操作已取消');\r\n            });\r\n        },\r\n        handleDownload() {\r\n            require.ensure([], () => {\r\n                const { export_json_to_excel } = require('vendor/Export2Excel');\r\n                const tHeader = ['收件人', '主题', '创建时间', '最后修改时间'];\r\n                const filterVal = ['receiveList', 'title', 'createDate', 'lastmodifyDate'];\r\n                const data = this.formatJson(filterVal, this.list);\r\n                export_json_to_excel(tHeader, data, parseTime(Date.now()) + '草稿箱数据');\r\n            })\r\n        },\r\n        formatJson(filterVal, jsonData) {\r\n            return jsonData.map(v => filterVal.map(j => {\r\n                if (~j.indexOf('Date')) {\r\n                    return parseTime(v[j])\r\n                } else if (getType(v[j]) === 'Array') {\r\n                    let str = '';\r\n                    v[j].forEach(item => str += item.name + '<' + item.mail + '>;');\r\n                    return str;\r\n                } else {\r\n                    return v[j]\r\n                }\r\n            }))\r\n        },\r\n        toggleStar(row) {\r\n            const idArr = [];\r\n            if (row) {\r\n                idArr.push(row.id);\r\n            } else {\r\n                const selectedLen = this.multipleSelection.length || 0;\r\n                if (selectedLen < 1) {\r\n                    this.$message('请选择邮件进行标记');\r\n                    return;\r\n                }\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n            }\r\n            labelAPI.toggleStar(idArr).subscribe({\r\n                next: () => {\r\n                    if (row) {\r\n                        row.isStar = !row.isStar;\r\n                    } else {\r\n                        this.multipleSelection.forEach(item => item.isStar = true);\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        handleMark(labelId) {\r\n            if (labelId === 'star') {\r\n                this.toggleStar();\r\n            } else {\r\n                const selectedLen = this.multipleSelection.length || 0;\r\n                if (selectedLen < 1) {\r\n                    this.$message('请选择邮件进行标记');\r\n                    return;\r\n                }\r\n                const idArr = [];\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n                labelAPI.markLabel(labelId, idArr).subscribe({\r\n                    next: () => this.getList()\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// index.vue?61d767f9","import fetch from 'utils/fetch';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\nexport function fetchList(query) {\r\n    return fetch({\r\n        url: '/draftbox/list',\r\n        method: 'get',\r\n        params: query\r\n    });\r\n}\r\n\r\nexport function delDraft(idArr) {\r\n    const idStr = String(idArr);\r\n    console.log('要删除的草稿id:' + idStr);\r\n    return Observable.create(observer => {\r\n        setTimeout(() => { observer.next(true); }, 1000);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/draftbox.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b7dd7da0\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/draftbox/index.vue\n// module id = 436\n// module chunks = 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b7dd7da0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"10f73f0b\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b7dd7da0\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/draftbox/index.vue\n// module id = 518\n// module chunks = 11","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container calendar-list-container\"\n  }, [_c('div', {\n    staticClass: \"filter-container\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-del\",\n    attrs: {\n      \"type\": \"danger\",\n      \"icon\": \"delete\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleDelete()\n      }\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-reload\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.initPage\n    }\n  }, [_c('icon-svg', {\n    attrs: {\n      \"icon-class\": \"reload4\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-dropdown', {\n    staticClass: \"tool-item filter-item\",\n    attrs: {\n      \"split-button\": \"\",\n      \"type\": \"primary\",\n      \"menu-align\": \"start\"\n    },\n    on: {\n      \"command\": _vm.handleMark\n    }\n  }, [_vm._v(\"\\n            标记为\\n            \"), _c('el-dropdown-menu', {\n    slot: \"dropdown\"\n  }, [_c('el-dropdown-item', {\n    attrs: {\n      \"command\": \"star\"\n    }\n  }, [_c('icon-svg', {\n    staticClass: \"download-icon\",\n    attrs: {\n      \"icon-class\": \"favourite\"\n    }\n  }), _vm._v(\"星标邮件\")], 1), _vm._v(\" \"), _vm._l((_vm.labelList), function(label) {\n    return _c('el-dropdown-item', {\n      key: label.id,\n      attrs: {\n        \"command\": label.id + ''\n      }\n    }, [_c('icon-svg', {\n      staticClass: \"download-icon\",\n      attrs: {\n        \"icon-class\": \"label1\"\n      }\n    }), _vm._v(_vm._s(label.name))], 1)\n  })], 2)], 1), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"标题\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.title),\n      callback: function($$v) {\n        _vm.listQuery.title = $$v\n      },\n      expression: \"listQuery.title\"\n    }\n  }), _vm._v(\" \"), _c('el-date-picker', {\n    staticClass: \"tool-item filter-item\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    attrs: {\n      \"type\": \"datetimerange\",\n      \"picker-options\": _vm.dateOptions,\n      \"placeholder\": \"创建时间\",\n      \"align\": \"right\"\n    },\n    model: {\n      value: (_vm.createDateRange),\n      callback: function($$v) {\n        _vm.createDateRange = $$v\n      },\n      expression: \"createDateRange\"\n    }\n  }), _vm._v(\" \"), _c('el-date-picker', {\n    staticClass: \"tool-item filter-item\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    attrs: {\n      \"type\": \"datetimerange\",\n      \"picker-options\": _vm.dateOptions,\n      \"placeholder\": \"最后修改时间\",\n      \"align\": \"right\"\n    },\n    model: {\n      value: (_vm.lastModifyDateRange),\n      callback: function($$v) {\n        _vm.lastModifyDateRange = $$v\n      },\n      expression: \"lastModifyDateRange\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"search\"\n    },\n    on: {\n      \"click\": _vm.handleFilter\n    }\n  }, [_vm._v(\"搜索\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"text\",\n      \"icon\": \"document\"\n    },\n    on: {\n      \"click\": _vm.handleDownload\n    }\n  }, [_vm._v(\"导出\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.body\",\n      value: (_vm.listLoading),\n      expression: \"listLoading\",\n      modifiers: {\n        \"body\": true\n      }\n    }],\n    key: _vm.tableKey,\n    ref: \"multipleTable\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\",\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"sort-change\": _vm.customSort,\n      \"selection-change\": _vm.handleSelectionChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"min-width\": \"30px\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"left\",\n      \"width\": \"90px\",\n      \"label\": \"信息\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('icon-svg', {\n          staticClass: \"star\",\n          attrs: {\n            \"icon-class\": scope.row.isStar ? 'favourite' : 'favourite-o'\n          },\n          nativeOn: {\n            \"click\": function($event) {\n              _vm.toggleStar(scope.row)\n            }\n          }\n        }), _vm._v(\" \"), (scope.row.isHaveFile) ? _c('icon-svg', {\n          staticClass: \"file\",\n          attrs: {\n            \"icon-class\": \"label4\"\n          }\n        }) : _vm._e(), _vm._v(\" \"), (scope.row.isHaveAudio) ? _c('icon-svg', {\n          attrs: {\n            \"icon-class\": \"voice4\"\n          }\n        }) : _vm._e()]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"center\",\n      \"label\": \"收件人\",\n      \"width\": \"120px\",\n      \"show-overflow-tooltip\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"showReceiveName\")(scope.row.receiveList)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"title\",\n      \"sortable\": \"custom\",\n      \"label\": \"主题\",\n      \"show-overflow-tooltip\": true,\n      \"min-width\": \"400px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', {\n          staticClass: \"link-type\",\n          on: {\n            \"click\": function($event) {\n              _vm.goToDetail(scope.row.id)\n            }\n          }\n        }, [_vm._v(_vm._s(scope.row.title))]), _vm._v(\" \"), _vm._l((scope.row.labelList), function(label) {\n          return _c('el-tag', {\n            key: label.guid\n          }, [_vm._v(_vm._s(label.name))])\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"createDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"创建时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.createDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"lastModifyDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"最后修改时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.lastModifyDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.listLoading),\n      expression: \"!listLoading\"\n    }],\n    staticClass: \"pagination-container\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"current-page\": _vm.listQuery.page,\n      \"page-sizes\": [10, 20, 30, 50],\n      \"page-size\": _vm.listQuery.limit,\n      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n      \"total\": _vm.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange,\n      \"update:currentPage\": function($event) {\n        _vm.listQuery.page = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b7dd7da0\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/draftbox/index.vue\n// module id = 567\n// module chunks = 11"],"sourceRoot":""}