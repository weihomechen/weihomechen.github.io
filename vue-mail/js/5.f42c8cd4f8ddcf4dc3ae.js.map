{"version":3,"sources":["webpack:///js/5.f42c8cd4f8ddcf4dc3ae.js","webpack:///./src/views/outbox/index.vue","webpack:///index.vue","webpack:///./src/api/outbox.js","webpack:///./src/views/outbox/index.vue?9560","webpack:///./src/views/outbox/index.vue?d4d6","webpack:///./src/views/outbox/index.vue?6472"],"names":["webpackJsonp","318","module","exports","__webpack_require__","injectStyle","ssrContext","Component","407","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","defineProperty","value","_outbox","outboxAPI","_mail_label","labelAPI","_validate","_utils","name","data","list","total","listLoading","listQuery","page","limit","title","undefined","receciveName","receciveMail","sort","order","multipleSelection","tableKey","labelList","created","this","initPage","filters","showReceiveName","receiveList","nameStr","forEach","item","methods","getList","getLabelList","_this","fetchList","then","response","items","_this2","res","handleFilter","handleSizeChange","val","handleCurrentChange","customSort","sortObj","prop","timeFilter","time","start","end","parseInt","goToDetail","id","$store","commit","$router","push","path","edit","length","$message","forward","handleSelectionChange","handleDelete","_this3","selectedLen","$confirm","confirmButtonText","cancelButtonText","type","idArr","delSendMail","subscribe","next","message","duration","error","showClose","catch","handleDownload","_this4","e","_require","export_json_to_excel","tHeader","filterVal","formatJson","parseTime","Date","now","bind","oe","jsonData","map","v","j","indexOf","getType","str","mail","toggleStar","row","_this5","isStar","handleMark","labelId","_this6","markLabel","411","query","_fetch2","url","method","params","idStr","String","console","log","_Observable","Observable","create","observer","setTimeout","_fetch","428","i","version","sources","names","mappings","file","sourceRoot","510","content","locals","556","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","attrs","icon","on","click","_v","$event","icon-class","split-button","menu-align","command","slot","_l","label","_s","staticStyle","width","placeholder","nativeOn","keyup","_k","keyCode","model","callback","$$v","expression","receiveName","receiveMail","modifiers","body","ref","border","highlight-current-row","sort-change","selection-change","min-width","align","scopedSlots","_u","fn","scope","_e","show-overflow-tooltip","_f","sortable","guid","sendDate","current-page","page-sizes","page-size","layout","size-change","current-change","update:currentPage","staticRenderFns"],"mappings":"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","file":"js/5.f42c8cd4f8ddcf4dc3ae.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(510)\n}\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(407),\n  /* template */\n  __webpack_require__(556),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 407:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _outbox = __webpack_require__(411);\n\nvar outboxAPI = _interopRequireWildcard(_outbox);\n\nvar _mail_label = __webpack_require__(114);\n\nvar labelAPI = _interopRequireWildcard(_mail_label);\n\nvar _validate = __webpack_require__(115);\n\nvar _utils = __webpack_require__(9);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = {\n    name: 'outbox',\n    data: function data() {\n        return {\n            list: null,\n            total: null,\n            listLoading: true,\n            listQuery: {\n                page: 1,\n                limit: 20,\n                title: undefined,\n                receciveName: undefined,\n                receciveMail: undefined,\n                sort: '',\n                order: ''\n            },\n            multipleSelection: [],\n            tableKey: 0,\n            labelList: []\n        };\n    },\n    created: function created() {\n        this.initPage();\n    },\n\n    filters: {\n        showReceiveName: function showReceiveName(receiveList) {\n            var nameStr = '';\n            receiveList.forEach(function (item) {\n                return nameStr += item.name + ';';\n            });\n            return nameStr;\n        }\n    },\n    methods: {\n        initPage: function initPage() {\n            this.getList();\n            this.getLabelList();\n        },\n        getList: function getList() {\n            var _this = this;\n\n            this.listLoading = true;\n            outboxAPI.fetchList(this.listQuery).then(function (response) {\n                _this.list = response.data.items;\n                _this.total = response.data.total;\n                _this.listLoading = false;\n            });\n        },\n        getLabelList: function getLabelList() {\n            var _this2 = this;\n\n            labelAPI.fetchList().then(function (res) {\n                _this2.labelList = res.data.labelList;\n            });\n        },\n        handleFilter: function handleFilter() {\n            this.getList();\n        },\n        handleSizeChange: function handleSizeChange(val) {\n            this.listQuery.limit = val;\n            this.getList();\n        },\n        handleCurrentChange: function handleCurrentChange(val) {\n            this.listQuery.page = val;\n            this.getList();\n        },\n        customSort: function customSort(sortObj) {\n            this.listQuery.sort = sortObj.prop;\n            this.listQuery.order = sortObj.order;\n            this.getList();\n        },\n        timeFilter: function timeFilter(time) {\n            if (!time[0]) {\n                this.listQuery.start = undefined;\n                this.listQuery.end = undefined;\n                return;\n            }\n            this.listQuery.start = parseInt(+time[0] / 1000);\n            this.listQuery.end = parseInt((+time[1] + 3600 * 1000 * 24) / 1000);\n        },\n        goToDetail: function goToDetail(id) {\n            this.$store.commit('SET_MAIL_ID', id);\n            this.$store.commit('SET_MAIL_TYPE', 'send');\n            this.$router.push({ path: '/mail_detail/index' });\n        },\n        edit: function edit() {\n            var selectedLen = this.multipleSelection.length || 0;\n            if (selectedLen !== 1) {\n                this.$message('请选择一封邮件进行编辑');\n                return;\n            }\n            this.$store.commit('SET_MAIL_ID', this.multipleSelection[0].id);\n            this.$store.commit('SET_PAGE_TYPE', 'edit');\n            this.$store.commit('SET_MAIL_TYPE', 'send');\n            this.$router.push({ path: '/mail_send/index' });\n        },\n        forward: function forward() {\n            var selectedLen = this.multipleSelection.length || 0;\n            if (selectedLen !== 1) {\n                this.$message('请选择一封邮件进行转发');\n                return;\n            }\n            this.$store.commit('SET_MAIL_ID', this.multipleSelection[0].id);\n            this.$store.commit('SET_PAGE_TYPE', 'forward');\n            this.$store.commit('SET_MAIL_TYPE', 'send');\n            this.$router.push({ path: '/mail_send/index' });\n        },\n        handleSelectionChange: function handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        handleDelete: function handleDelete() {\n            var _this3 = this;\n\n            var selectedLen = this.multipleSelection.length || 0;\n            if (selectedLen < 1) {\n                this.$message('请选择邮件进行删除');\n                return;\n            }\n            this.$confirm('是否删除这' + selectedLen + '封邮件?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                var idArr = [];\n                _this3.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n                outboxAPI.delSendMail(idArr).subscribe({\n                    next: function next() {\n                        _this3.$message({\n                            message: '删除成功',\n                            type: 'success',\n                            duration: 2000\n                        });\n                        _this3.getList();\n                    },\n                    error: function error() {\n                        return _this3.$message({\n                            showClose: true,\n                            message: '删除失败',\n                            type: 'error'\n                        });\n                    }\n                });\n            }).catch(function () {\n                _this3.$message('操作已取消');\n            });\n        },\n        handleDownload: function handleDownload() {\n            var _this4 = this;\n\n            __webpack_require__.e/* require.ensure */(19/* duplicate */).then((function () {\n                var _require = __webpack_require__(334),\n                    export_json_to_excel = _require.export_json_to_excel;\n\n                var tHeader = ['收件人', '主题', '发送时间'];\n                var filterVal = ['receiveList', 'title', 'sendDate'];\n                var data = _this4.formatJson(filterVal, _this4.list);\n                export_json_to_excel(tHeader, data, (0, _utils.parseTime)(Date.now()) + '发件箱数据');\n            }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);\n        },\n        formatJson: function formatJson(filterVal, jsonData) {\n            return jsonData.map(function (v) {\n                return filterVal.map(function (j) {\n                    if (~j.indexOf('Date')) {\n                        return (0, _utils.parseTime)(v[j]);\n                    } else if ((0, _validate.getType)(v[j]) === 'Array') {\n                        var str = '';\n                        v[j].forEach(function (item) {\n                            return str += item.name + '<' + item.mail + '>;';\n                        });\n                        return str;\n                    } else {\n                        return v[j];\n                    }\n                });\n            });\n        },\n        toggleStar: function toggleStar(row) {\n            var _this5 = this;\n\n            var idArr = [];\n            if (row) {\n                idArr.push(row.id);\n            } else {\n                var selectedLen = this.multipleSelection.length || 0;\n                if (selectedLen < 1) {\n                    this.$message('请选择邮件进行标记');\n                    return;\n                }\n                this.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n            }\n            labelAPI.toggleStar(idArr).subscribe({\n                next: function next() {\n                    if (row) {\n                        row.isStar = !row.isStar;\n                    } else {\n                        _this5.multipleSelection.forEach(function (item) {\n                            return item.isStar = true;\n                        });\n                    }\n                }\n            });\n        },\n        handleMark: function handleMark(labelId) {\n            var _this6 = this;\n\n            if (labelId === 'star') {\n                this.toggleStar();\n            } else {\n                var selectedLen = this.multipleSelection.length || 0;\n                if (selectedLen < 1) {\n                    this.$message('请选择邮件进行标记');\n                    return;\n                }\n                var idArr = [];\n                this.multipleSelection.forEach(function (item) {\n                    return idArr.push(item.id);\n                });\n                labelAPI.markLabel(labelId, idArr).subscribe({\n                    next: function next() {\n                        return _this6.getList();\n                    }\n                });\n            }\n        }\n    }\n};\n\n/***/ }),\n\n/***/ 411:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.fetchList = fetchList;\nexports.delSendMail = delSendMail;\n\nvar _fetch = __webpack_require__(35);\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _Observable = __webpack_require__(64);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction fetchList(query) {\n    return (0, _fetch2.default)({\n        url: '/outbox/list',\n        method: 'get',\n        params: query\n    });\n}\n\nfunction delSendMail(idArr) {\n    var idStr = String(idArr);\n    console.log('要删除的发件id:' + idStr);\n    return _Observable.Observable.create(function (observer) {\n        setTimeout(function () {\n            observer.next(true);\n        }, 1000);\n    });\n}\n\n/***/ }),\n\n/***/ 428:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(300)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 510:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(428);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(301)(\"cd47c988\", content, true);\n\n/***/ }),\n\n/***/ 556:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container calendar-list-container\"\n  }, [_c('div', {\n    staticClass: \"filter-container\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-edit\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"edit\"\n    },\n    on: {\n      \"click\": _vm.edit\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-forward\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"share\"\n    },\n    on: {\n      \"click\": _vm.forward\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-del\",\n    attrs: {\n      \"type\": \"danger\",\n      \"icon\": \"delete\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleDelete()\n      }\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-reload\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.initPage\n    }\n  }, [_c('icon-svg', {\n    attrs: {\n      \"icon-class\": \"reload4\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-dropdown', {\n    staticClass: \"tool-item filter-item\",\n    attrs: {\n      \"split-button\": \"\",\n      \"type\": \"primary\",\n      \"menu-align\": \"start\"\n    },\n    on: {\n      \"command\": _vm.handleMark\n    }\n  }, [_vm._v(\"\\n            标记为\\n            \"), _c('el-dropdown-menu', {\n    slot: \"dropdown\"\n  }, [_c('el-dropdown-item', {\n    attrs: {\n      \"command\": \"star\"\n    }\n  }, [_c('icon-svg', {\n    staticClass: \"download-icon\",\n    attrs: {\n      \"icon-class\": \"favourite\"\n    }\n  }), _vm._v(\"星标邮件\")], 1), _vm._v(\" \"), _vm._l((_vm.labelList), function(label) {\n    return _c('el-dropdown-item', {\n      key: label.id,\n      attrs: {\n        \"command\": label.id + ''\n      }\n    }, [_c('icon-svg', {\n      staticClass: \"download-icon\",\n      attrs: {\n        \"icon-class\": \"label1\"\n      }\n    }), _vm._v(_vm._s(label.name))], 1)\n  })], 2)], 1), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"标题\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.title),\n      callback: function($$v) {\n        _vm.listQuery.title = $$v\n      },\n      expression: \"listQuery.title\"\n    }\n  }), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"收件人\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.receiveName),\n      callback: function($$v) {\n        _vm.listQuery.receiveName = $$v\n      },\n      expression: \"listQuery.receiveName\"\n    }\n  }), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"收件邮箱\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.receiveMail),\n      callback: function($$v) {\n        _vm.listQuery.receiveMail = $$v\n      },\n      expression: \"listQuery.receiveMail\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"search\"\n    },\n    on: {\n      \"click\": _vm.handleFilter\n    }\n  }, [_vm._v(\"搜索\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"text\",\n      \"icon\": \"document\"\n    },\n    on: {\n      \"click\": _vm.handleDownload\n    }\n  }, [_vm._v(\"导出\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.body\",\n      value: (_vm.listLoading),\n      expression: \"listLoading\",\n      modifiers: {\n        \"body\": true\n      }\n    }],\n    key: _vm.tableKey,\n    ref: \"multipleTable\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\",\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"sort-change\": _vm.customSort,\n      \"selection-change\": _vm.handleSelectionChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"min-width\": \"30px\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"left\",\n      \"width\": \"90px\",\n      \"label\": \"信息\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('icon-svg', {\n          staticClass: \"star\",\n          attrs: {\n            \"icon-class\": scope.row.isStar ? 'favourite' : 'favourite-o'\n          },\n          nativeOn: {\n            \"click\": function($event) {\n              _vm.toggleStar(scope.row)\n            }\n          }\n        }), _vm._v(\" \"), (scope.row.isHaveFile) ? _c('icon-svg', {\n          staticClass: \"file\",\n          attrs: {\n            \"icon-class\": \"label4\"\n          }\n        }) : _vm._e(), _vm._v(\" \"), (scope.row.isHaveAudio) ? _c('icon-svg', {\n          attrs: {\n            \"icon-class\": \"voice4\"\n          }\n        }) : _vm._e()]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"center\",\n      \"label\": \"收件人\",\n      \"width\": \"120px\",\n      \"show-overflow-tooltip\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"showReceiveName\")(scope.row.receiveList)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"title\",\n      \"sortable\": \"custom\",\n      \"label\": \"主题\",\n      \"show-overflow-tooltip\": true,\n      \"min-width\": \"400px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', {\n          staticClass: \"link-type\",\n          on: {\n            \"click\": function($event) {\n              _vm.goToDetail(scope.row.id)\n            }\n          }\n        }, [_vm._v(_vm._s(scope.row.title))]), _vm._v(\" \"), _vm._l((scope.row.labelList), function(label) {\n          return _c('el-tag', {\n            key: label.guid\n          }, [_vm._v(_vm._s(label.name))])\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"sendDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"发送时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.sendDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.listLoading),\n      expression: \"!listLoading\"\n    }],\n    staticClass: \"pagination-container\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"current-page\": _vm.listQuery.page,\n      \"page-sizes\": [10, 20, 30, 50],\n      \"page-size\": _vm.listQuery.limit,\n      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n      \"total\": _vm.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange,\n      \"update:currentPage\": function($event) {\n        _vm.listQuery.page = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/5.f42c8cd4f8ddcf4dc3ae.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-529e7363\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-529e7363\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/outbox/index.vue\n// module id = 318\n// module chunks = 5","<template>\r\n    <div class=\"app-container calendar-list-container\">\r\n    \r\n        <div class=\"filter-container\">\r\n    \r\n            <el-button v-waves type=\"primary\" icon=\"edit\" @click=\"edit\" class=\"tool-item filter-item btn-edit\"></el-button>\r\n            <el-button v-waves type=\"primary\" icon=\"share\" @click=\"forward\" class=\"tool-item filter-item btn-forward\"></el-button>\r\n            <el-button v-waves type=\"danger\" icon=\"delete\" class=\"tool-item filter-item btn-del\" v-on:click=\"handleDelete()\"></el-button>\r\n            <el-button v-waves type=\"primary\" class=\"tool-item filter-item btn-reload\" v-on:click=\"initPage\">\r\n                <icon-svg icon-class=\"reload4\"/>\r\n            </el-button>\r\n    \r\n            <el-dropdown @command=\"handleMark\" split-button type=\"primary\" menu-align=\"start\" class=\"tool-item filter-item\">\r\n                标记为\r\n                <el-dropdown-menu slot=\"dropdown\">\r\n                    <el-dropdown-item command=\"star\">\r\n                         <icon-svg icon-class=\"favourite\" class=\"download-icon\" />星标邮件</el-dropdown-item>\r\n                    <el-dropdown-item v-for=\"label in labelList\" :key=\"label.id\" :command=\"label.id + ''\">\r\n                         <icon-svg icon-class=\"label1\" class=\"download-icon\" />{{label.name}}</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 300px;\" class=\"filter-item\" placeholder=\"标题\" v-model=\"listQuery.title\">\r\n            </el-input>\r\n            <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 150px;\" class=\"filter-item\" placeholder=\"收件人\" v-model=\"listQuery.receiveName\">\r\n            </el-input>\r\n            <el-input @keyup.enter.native=\"handleFilter\" style=\"width: 150px;\" class=\"filter-item\" placeholder=\"收件邮箱\" v-model=\"listQuery.receiveMail\">\r\n            </el-input>\r\n    \r\n            <el-button class=\"filter-item\" type=\"primary\" v-waves icon=\"search\" @click=\"handleFilter\">搜索</el-button>\r\n            <el-button class=\"filter-item\" type=\"text\" icon=\"document\" @click=\"handleDownload\">导出</el-button>\r\n        </div>\r\n    \r\n        <el-table :key='tableKey' :data=\"list\" ref=\"multipleTable\" @sort-change=\"customSort\" @selection-change=\"handleSelectionChange\" v-loading.body=\"listLoading\" border highlight-current-row style=\"width: 100%\">\r\n    \r\n            <el-table-column type=\"selection\" min-width=\"30px\">\r\n            </el-table-column>\r\n    \r\n            <el-table-column align=\"left\" width=\"90px\" label=\"信息\">\r\n                <template scope=\"scope\">\r\n                    <icon-svg @click.native=\"toggleStar(scope.row)\" :icon-class=\"scope.row.isStar? 'favourite':'favourite-o'\" class=\"star\" />\r\n                    <icon-svg v-if=\"scope.row.isHaveFile\" icon-class=\"label4\" class=\"file\" />\r\n                    <icon-svg v-if=\"scope.row.isHaveAudio\" icon-class=\"voice4\"/>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column align=\"center\" label=\"收件人\" width=\"120px\" :show-overflow-tooltip=\"true\">\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.receiveList | showReceiveName}}</span>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column prop=\"title\" sortable=\"custom\" label=\"主题\" :show-overflow-tooltip=\"true\" min-width=\"400px\">\r\n                <template scope=\"scope\">\r\n                    <span class=\"link-type\" @click=\"goToDetail(scope.row.id)\">{{scope.row.title}}</span>\r\n                    <el-tag v-for=\"label in scope.row.labelList\" :key=\"label.guid\">{{label.name}}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n            <el-table-column prop=\"sendDate\" sortable=\"custom\" align=\"center\" label=\"发送时间\" width=\"150px\">\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.sendDate | parseTime('{y}-{m}-{d} {h}:{i}')}}</span>\r\n                </template>\r\n            </el-table-column>\r\n    \r\n        </el-table>\r\n    \r\n        <div v-show=\"!listLoading\" class=\"pagination-container\">\r\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"listQuery.page\" :page-sizes=\"[10,20,30, 50]\" :page-size=\"listQuery.limit\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n    \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as outboxAPI from 'api/outbox';\r\nimport * as labelAPI from 'api/mail_label';\r\nimport { getType } from 'utils/validate';\r\nimport { parseTime } from 'utils';\r\n\r\nexport default {\r\n    name: 'outbox',\r\n    data() {\r\n        return {\r\n            list: null,\r\n            total: null,\r\n            listLoading: true,\r\n            listQuery: {\r\n                page: 1,\r\n                limit: 20,\r\n                title: undefined,\r\n                receciveName: undefined,\r\n                receciveMail: undefined,\r\n                sort: '',\r\n                order: ''\r\n            },\r\n            multipleSelection: [],\r\n            tableKey: 0,\r\n            labelList: []\r\n        }\r\n    },\r\n    created() {\r\n        this.initPage();\r\n    },\r\n    filters: {\r\n        showReceiveName(receiveList) {\r\n            let nameStr = '';\r\n            receiveList.forEach(item => nameStr += item.name + ';');\r\n            return nameStr;\r\n        }\r\n    },\r\n    methods: {\r\n        initPage() {\r\n            this.getList();\r\n            this.getLabelList();\r\n        },\r\n        getList() {\r\n            this.listLoading = true;\r\n            outboxAPI.fetchList(this.listQuery).then(response => {\r\n                this.list = response.data.items;\r\n                this.total = response.data.total;\r\n                this.listLoading = false;\r\n            })\r\n        },\r\n        getLabelList() {\r\n            labelAPI.fetchList().then(res => {\r\n                this.labelList = res.data.labelList;\r\n            })\r\n        },\r\n        handleFilter() {\r\n            this.getList();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.listQuery.limit = val;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.listQuery.page = val;\r\n            this.getList();\r\n        },\r\n        customSort(sortObj) {\r\n            this.listQuery.sort = sortObj.prop;\r\n            this.listQuery.order = sortObj.order;\r\n            this.getList();\r\n        },\r\n        timeFilter(time) {\r\n            if (!time[0]) {\r\n                this.listQuery.start = undefined;\r\n                this.listQuery.end = undefined;\r\n                return;\r\n            }\r\n            this.listQuery.start = parseInt(+time[0] / 1000);\r\n            this.listQuery.end = parseInt((+time[1] + 3600 * 1000 * 24) / 1000);\r\n        },\r\n        goToDetail(id) {\r\n            this.$store.commit('SET_MAIL_ID', id);\r\n            this.$store.commit('SET_MAIL_TYPE', 'send');\r\n            this.$router.push({ path: '/mail_detail/index' });\r\n        },\r\n        edit() {\r\n            const selectedLen = this.multipleSelection.length || 0;\r\n            if (selectedLen !== 1) {\r\n                this.$message('请选择一封邮件进行编辑');\r\n                return;\r\n            }\r\n            this.$store.commit('SET_MAIL_ID', this.multipleSelection[0].id);\r\n            this.$store.commit('SET_PAGE_TYPE', 'edit');\r\n            this.$store.commit('SET_MAIL_TYPE', 'send');\r\n            this.$router.push({ path: '/mail_send/index' });\r\n        },\r\n        forward() {\r\n            const selectedLen = this.multipleSelection.length || 0;\r\n            if (selectedLen !== 1) {\r\n                this.$message('请选择一封邮件进行转发');\r\n                return;\r\n            }\r\n            this.$store.commit('SET_MAIL_ID', this.multipleSelection[0].id);\r\n            this.$store.commit('SET_PAGE_TYPE', 'forward');\r\n            this.$store.commit('SET_MAIL_TYPE', 'send');\r\n            this.$router.push({ path: '/mail_send/index' });\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        },\r\n        handleDelete() {\r\n            const selectedLen = this.multipleSelection.length || 0;\r\n            if (selectedLen < 1) {\r\n                this.$message('请选择邮件进行删除');\r\n                return;\r\n            }\r\n            this.$confirm('是否删除这' + selectedLen + '封邮件?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                const idArr = [];\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n                outboxAPI.delSendMail(idArr).subscribe({\r\n                    next: () => {\r\n                        this.$message({\r\n                            message: '删除成功',\r\n                            type: 'success',\r\n                            duration: 2000\r\n                        });\r\n                        this.getList();\r\n                    },\r\n                    error: () => this.$message({\r\n                        showClose: true,\r\n                        message: '删除失败',\r\n                        type: 'error'\r\n                    })\r\n                });\r\n            }).catch(() => {\r\n                this.$message('操作已取消');\r\n            });\r\n        },\r\n        handleDownload() {\r\n            require.ensure([], () => {\r\n                const { export_json_to_excel } = require('vendor/Export2Excel');\r\n                const tHeader = ['收件人', '主题', '发送时间'];\r\n                const filterVal = ['receiveList', 'title', 'sendDate'];\r\n                const data = this.formatJson(filterVal, this.list);\r\n                export_json_to_excel(tHeader, data, parseTime(Date.now()) + '发件箱数据');\r\n            })\r\n        },\r\n        formatJson(filterVal, jsonData) {\r\n            return jsonData.map(v => filterVal.map(j => {\r\n                if (~j.indexOf('Date')) {\r\n                    return parseTime(v[j])\r\n                } else if (getType(v[j]) === 'Array') {\r\n                    let str = '';\r\n                    v[j].forEach(item => str += item.name + '<' + item.mail + '>;');\r\n                    return str;\r\n                } else {\r\n                    return v[j]\r\n                }\r\n            }))\r\n        },\r\n        toggleStar(row) {\r\n            const idArr = [];\r\n            if (row) {\r\n                idArr.push(row.id);\r\n            } else {\r\n                const selectedLen = this.multipleSelection.length || 0;\r\n                if (selectedLen < 1) {\r\n                    this.$message('请选择邮件进行标记');\r\n                    return;\r\n                }\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n            }\r\n            labelAPI.toggleStar(idArr).subscribe({\r\n                next: () => {\r\n                    if (row) {\r\n                        row.isStar = !row.isStar;\r\n                    } else {\r\n                        this.multipleSelection.forEach(item => item.isStar = true);\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        handleMark(labelId) {\r\n            if (labelId === 'star') {\r\n                this.toggleStar();\r\n            } else {\r\n                const selectedLen = this.multipleSelection.length || 0;\r\n                if (selectedLen < 1) {\r\n                    this.$message('请选择邮件进行标记');\r\n                    return;\r\n                }\r\n                const idArr = [];\r\n                this.multipleSelection.forEach(item => idArr.push(item.id));\r\n                labelAPI.markLabel(labelId, idArr).subscribe({\r\n                    next: () => this.getList()\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// index.vue?1005434d","import fetch from 'utils/fetch';\r\nimport { Observable } from 'rxjs/Observable';\r\n\r\nexport function fetchList(query) {\r\n    return fetch({\r\n        url: '/outbox/list',\r\n        method: 'get',\r\n        params: query\r\n    });\r\n}\r\n\r\nexport function delSendMail(idArr) {\r\n    const idStr = String(idArr);\r\n    console.log('要删除的发件id:' + idStr);\r\n    return Observable.create(observer => {\r\n        setTimeout(() => { observer.next(true); }, 1000);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/outbox.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-529e7363\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/outbox/index.vue\n// module id = 428\n// module chunks = 5","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-529e7363\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"cd47c988\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-529e7363\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/outbox/index.vue\n// module id = 510\n// module chunks = 5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container calendar-list-container\"\n  }, [_c('div', {\n    staticClass: \"filter-container\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-edit\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"edit\"\n    },\n    on: {\n      \"click\": _vm.edit\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-forward\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"share\"\n    },\n    on: {\n      \"click\": _vm.forward\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-del\",\n    attrs: {\n      \"type\": \"danger\",\n      \"icon\": \"delete\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleDelete()\n      }\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"tool-item filter-item btn-reload\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.initPage\n    }\n  }, [_c('icon-svg', {\n    attrs: {\n      \"icon-class\": \"reload4\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-dropdown', {\n    staticClass: \"tool-item filter-item\",\n    attrs: {\n      \"split-button\": \"\",\n      \"type\": \"primary\",\n      \"menu-align\": \"start\"\n    },\n    on: {\n      \"command\": _vm.handleMark\n    }\n  }, [_vm._v(\"\\n            标记为\\n            \"), _c('el-dropdown-menu', {\n    slot: \"dropdown\"\n  }, [_c('el-dropdown-item', {\n    attrs: {\n      \"command\": \"star\"\n    }\n  }, [_c('icon-svg', {\n    staticClass: \"download-icon\",\n    attrs: {\n      \"icon-class\": \"favourite\"\n    }\n  }), _vm._v(\"星标邮件\")], 1), _vm._v(\" \"), _vm._l((_vm.labelList), function(label) {\n    return _c('el-dropdown-item', {\n      key: label.id,\n      attrs: {\n        \"command\": label.id + ''\n      }\n    }, [_c('icon-svg', {\n      staticClass: \"download-icon\",\n      attrs: {\n        \"icon-class\": \"label1\"\n      }\n    }), _vm._v(_vm._s(label.name))], 1)\n  })], 2)], 1), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"300px\"\n    },\n    attrs: {\n      \"placeholder\": \"标题\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.title),\n      callback: function($$v) {\n        _vm.listQuery.title = $$v\n      },\n      expression: \"listQuery.title\"\n    }\n  }), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"收件人\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.receiveName),\n      callback: function($$v) {\n        _vm.listQuery.receiveName = $$v\n      },\n      expression: \"listQuery.receiveName\"\n    }\n  }), _vm._v(\" \"), _c('el-input', {\n    staticClass: \"filter-item\",\n    staticStyle: {\n      \"width\": \"150px\"\n    },\n    attrs: {\n      \"placeholder\": \"收件邮箱\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.handleFilter($event)\n      }\n    },\n    model: {\n      value: (_vm.listQuery.receiveMail),\n      callback: function($$v) {\n        _vm.listQuery.receiveMail = $$v\n      },\n      expression: \"listQuery.receiveMail\"\n    }\n  }), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"waves\",\n      rawName: \"v-waves\"\n    }],\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"primary\",\n      \"icon\": \"search\"\n    },\n    on: {\n      \"click\": _vm.handleFilter\n    }\n  }, [_vm._v(\"搜索\")]), _vm._v(\" \"), _c('el-button', {\n    staticClass: \"filter-item\",\n    attrs: {\n      \"type\": \"text\",\n      \"icon\": \"document\"\n    },\n    on: {\n      \"click\": _vm.handleDownload\n    }\n  }, [_vm._v(\"导出\")])], 1), _vm._v(\" \"), _c('el-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.body\",\n      value: (_vm.listLoading),\n      expression: \"listLoading\",\n      modifiers: {\n        \"body\": true\n      }\n    }],\n    key: _vm.tableKey,\n    ref: \"multipleTable\",\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.list,\n      \"border\": \"\",\n      \"highlight-current-row\": \"\"\n    },\n    on: {\n      \"sort-change\": _vm.customSort,\n      \"selection-change\": _vm.handleSelectionChange\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"selection\",\n      \"min-width\": \"30px\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"left\",\n      \"width\": \"90px\",\n      \"label\": \"信息\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('icon-svg', {\n          staticClass: \"star\",\n          attrs: {\n            \"icon-class\": scope.row.isStar ? 'favourite' : 'favourite-o'\n          },\n          nativeOn: {\n            \"click\": function($event) {\n              _vm.toggleStar(scope.row)\n            }\n          }\n        }), _vm._v(\" \"), (scope.row.isHaveFile) ? _c('icon-svg', {\n          staticClass: \"file\",\n          attrs: {\n            \"icon-class\": \"label4\"\n          }\n        }) : _vm._e(), _vm._v(\" \"), (scope.row.isHaveAudio) ? _c('icon-svg', {\n          attrs: {\n            \"icon-class\": \"voice4\"\n          }\n        }) : _vm._e()]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"align\": \"center\",\n      \"label\": \"收件人\",\n      \"width\": \"120px\",\n      \"show-overflow-tooltip\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"showReceiveName\")(scope.row.receiveList)))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"title\",\n      \"sortable\": \"custom\",\n      \"label\": \"主题\",\n      \"show-overflow-tooltip\": true,\n      \"min-width\": \"400px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', {\n          staticClass: \"link-type\",\n          on: {\n            \"click\": function($event) {\n              _vm.goToDetail(scope.row.id)\n            }\n          }\n        }, [_vm._v(_vm._s(scope.row.title))]), _vm._v(\" \"), _vm._l((scope.row.labelList), function(label) {\n          return _c('el-tag', {\n            key: label.guid\n          }, [_vm._v(_vm._s(label.name))])\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"sendDate\",\n      \"sortable\": \"custom\",\n      \"align\": \"center\",\n      \"label\": \"发送时间\",\n      \"width\": \"150px\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(_vm._f(\"parseTime\")(scope.row.sendDate, '{y}-{m}-{d} {h}:{i}')))])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.listLoading),\n      expression: \"!listLoading\"\n    }],\n    staticClass: \"pagination-container\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"current-page\": _vm.listQuery.page,\n      \"page-sizes\": [10, 20, 30, 50],\n      \"page-size\": _vm.listQuery.limit,\n      \"layout\": \"total, sizes, prev, pager, next, jumper\",\n      \"total\": _vm.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange,\n      \"update:currentPage\": function($event) {\n        _vm.listQuery.page = $event\n      }\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-529e7363\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/outbox/index.vue\n// module id = 556\n// module chunks = 5"],"sourceRoot":""}