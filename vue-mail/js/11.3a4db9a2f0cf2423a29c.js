webpackJsonp([11],{322:function(t,e,i){function n(t){i(549)}var o=i(1)(i(434),i(596),n,null,null);t.exports=o.exports},434:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(117),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);e.default={name:"label_manage",data:function(){return{listLoading:!0,total:null,listQuery:{page:1,limit:10,sort:""},list:[],labelOperation:"",formVisible:!1,form:{name:"",color:"#20a0ff"}}},created:function(){this.getList()},filters:{operationFilter:function(t){return{add:"新增标签",edit:"编辑标签"}[t]}},methods:{getList:function(){var t=this;o.fetchList().then(function(e){t.list=e.data.labelList,t.total=e.data.total,t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},initForm:function(){this.form={name:"",color:"#20a0ff"}},openForm:function(t,e){this.labelOperation=t,this.formVisible=!0,"add"===t?this.initForm():this.form=e},submit:function(){var t=this;("add"===this.labelOperation?o.add:o.edit)(this.form).subscribe({next:function(){t.$message({type:"success",message:"操作成功",duration:1e3}),setTimeout(function(){t.formVisible=!1,t.getList()},1e3)},error:function(){t.$message({type:"error",message:"操作失败"})}})},delLabel:function(t){var e=this;this.$confirm("是否删除该标签，删除后也将删除邮件内该标签","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.del(t).subscribe({next:function(){e.$message("删除成功"),e.getList()},error:function(){e.$message("删除失败")}})})},goToMailList:function(t){this.$router.push({path:"/mail_list/index",query:{labelId:t}})}}}},467:function(t,e,i){e=t.exports=i(307)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},549:function(t,e,i){var n=i(467);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(308)("6392bf33",n,!0)},596:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){t.openForm("add")}}},[t._v("新增标签")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"labelTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center","min-width":"200px",label:"标签名"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:"primary",color:"#E3FDFD"},on:{click:function(i){t.goToMailList(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"edit-label",attrs:{size:"small",type:"primary"},on:{click:function(i){t.openForm("edit",e.row)}}},[t._v("编辑\n                ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){t.delLabel(e.row.id)}}},[t._v("删除\n                ")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){t.goToMailList(e.row.id)}}},[t._v("查看\n                ")])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.listQuery.page=e}}})],1),t._v(" "),i("el-dialog",{attrs:{title:t._f("operationFilter")(t.labelOperation),visible:t.formVisible},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"标签名称","label-width":"100px"}},[i("el-input",{attrs:{"auto-complete":"off",maxlength:"15",minlength:"1"},model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"标签颜色","label-width":"100px"}},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.form.color,callback:function(e){t.form.color=e},expression:"form.color"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});